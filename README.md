### 武将データの可視化ツールの実行方法
### 要件
* Ubuntu 16.04
* Anaconda python 3.6（Scikit-learn, numpy, matplotlibなどの標準的なパッケージ込み）

### 実行例
以下のようにanalyze_warrior.pyを実行すると、T-SNEで次元削減しクラスタリングされた武将データの２次元プロットと、各クラスターに関連する語、および各クラスターに属する武将名の一覧を表示することができます。。

python analyze_warrior.py
 
![alt text](https://raw.githubusercontent.com/hhachiya/invereFunction/master/analysis_cluster.png "clustering result")

```python
Enterを押すと, 各クラスター中心に関連する語top5を表示します
クラスター0 (-9.1,4.8): ['家臣', '宗直', '頼房', '義直', '城主']
クラスター1 (2.3,3.1): ['主君', '旧主', '老臣', '家康', '自刃']
クラスター2 (10.2,-3.7): ['名苗', '眞廣', '本阿弥', '饗する', '佐定']
クラスター3 (-1.6,-2.2): ['忠吉', '信綱', '秀宗', '高房', '義直']
クラスター4 (-2.7,4.5): ['家康', '秀吉', '家久', '主君', '清正']
クラスター5 (6.0,-1.0): ['近習', '眞廣', '沖室', '徳川家', '国元']
クラスター6 (11.3,1.9): ['鑑', '本阿弥', '宗長', '家伝', '眞廣']
クラスター7 (-6.0,-0.6): ['彦四郎', '信実', '頼房', '忠重', '老臣']
クラスター8 (2.6,-3.9): ['家康', '老臣', '家久', '主君', '一豊']
クラスター9 (6.5,-5.7): ['家来', '命', '方', '饗する', '佐定']

Enterを押すと, クラスター0に属する武将一覧を表示します:
['朝比奈信置' '穴山信友' '井伊直満' '井伊直義' '石亀政頼' '板垣信憲' '海野昌雪' '岡部貞綱' '奥山朝忠' '奥山朝利'
 '小河信章' '長船定行' '小田氏治' '小野朝直' '小野朝之' '小野政直' '小山田行村' '上泉秀綱_(主水佐)'
 '小寺則職_(戦国時代)' '斎藤利堯' '関盛信' '高梨内記' '竹田津鎮満' '土岐定政' '中野直由' '鍋島忠茂' '林秀貞'
 '北条氏照' '堀田興重' '松田直長' '水野忠分' '武藤安成' '室賀久太夫']
 
Enterを押すと, クラスター1に属する武将一覧を表示します:
['朝倉宗滴' '尼子国久' '臼杵鎮続' '飯富虎昌' '柿崎景家' '柏山明助' '金森長近' '兼重元宣' '河田長親' '北条高広'
 '香宗我部親泰' '佐伯惟治' '真田幸隆' '陶興房' '陶晴賢' '高橋紹運' '団忠正' '富田長繁' '内藤弘矩' '丹羽長秀'
 '橋本一巴' '北条氏邦' '北条綱成' '三宅長盛' '三好長慶' '三好義興' '森可成' '吉岡長増']

Enterを押すと, クラスター2に属する武将一覧を表示します:
['一条信龍' '宇喜多秀家' '織田信行' '加藤清正' '蒲生氏郷' '伊達成実' '津軽為信' '富樫晴貞' '豊臣秀保' '鳥居忠吉'
 '中条藤資' '保科正光' '細川忠興' '前田利益' '松永久秀' '水野勝成' '三好実休' '三好之長' '柳生宗厳']

Enterを押すと, クラスター3に属する武将一覧を表示します:
['伊木忠次' '今村正実' '色部光長' '大久保忠隣' '大庭三左衛門' '鬼庭綱元' '各務元正' '片倉景綱' '蒲生秀行_(侍従)'
 '黒田一成' '真田信尹' '島津忠恒' '下方貞清' '関口氏経' '長連龍' '堀直政' '本庄繁長' '本多正重' '宮田光次' '三好為三'
 '毛利秀包']

Enterを押すと, クラスター4に属する武将一覧を表示します:
['朝倉景鏡' '跡部勝資' '雨森清定' '井伊直宗' '井伊直元_(戦国時代)' '伊勢貞興' '猪俣邦憲' '大久保忠佐' '大熊朝秀'
 '織田信忠' '加賀井重望' '蒲生定秀' '河尻秀隆' '福島正成' '斎藤利治' '斎藤利三' '相良武任' '瀬戸方久' '多賀常則'
 '武田信豊_(甲斐武田氏)' '津田信澄' '鍋島直茂' '北条氏規' '本城惣右衛門' '本庄長英' '真柄隆基' '松平信康']

Enterを押すと, クラスター5に属する武将一覧を表示します:
['明智光秀' '浅野幸長' '有馬豊氏' '井伊直孝' '大谷吉継' '織田信雄' '織田信孝' '蒲生賢秀' '黒田長政' '黒田孝高'
 '小早川隆景' '小早川秀秋' '酒井忠次' '佐藤忠能' '柴田勝家' '滝川一益' '田中吉政' '谷衛友' '土井利勝' '徳川秀忠'
 '戸沢盛安' '豊臣秀次' '内藤忠興' '直江兼続' '塙直之' '本多忠勝' '本多正信' '松平忠吉' '松平康長' '山岡重長']

Enterを押すと, クラスター6に属する武将一覧を表示します:
['朝倉景紀' '安宅冬康' '伊集院忠棟' '板部岡江雪斎' '今川氏真' '大井信達' '蒲生貞秀' '菅正利' '北信愛' '北原兼孝'
 '吉川経基' '斎藤利綱' '斎藤妙椿' '佐川田昌俊' '佐野昌綱' '仙石久勝' '太原雪斎' '武田義統' '蜂須賀家政' '蜂屋頼隆'
 '北条幻庵' '細川幽斎' '三浦為春' '吉弘統幸' '脇坂安治']

Enterを押すと, クラスター7に属する武将一覧を表示します:
['大槻太郎左衛門' '岡本保忠_(新助)' '梶田繁政' '梶田直繁' '蒲生重郷' '京極高次' '櫛橋伊家' '斎藤市郎左衛門' '斎藤徳元'
 '斎藤義興' '佐藤昌信' '白神果春' '豊臣秀吉' '水野忠政' '三好長逸' '山口重勝' '山崎片家']

Enterを押すと, クラスター8に属する武将一覧を表示します:
['井伊直政' '池田輝政' '岩室重休' '吉川元長' '高力清長' '後藤信康' '榊原康政' '坂崎直盛' '真田信之' '宗義智'
 '竹中重治' '長宗我部信親' '長宗我部盛親' '藤堂高虎' '一柳直末' '平岩親吉' '福島正則' '穂井田元清' '堀尾吉晴' '本多重次'
 '本多正純' '前田玄以' '前田利家' '三井弥一郎' '村田吉次' '毛利輝元' '毛利秀元' '山田宗昌' '山家公頼']

Enterを押すと, クラスター9に属する武将一覧を表示します:
['尼子誠久' '市橋長勝' '大久保長安' '加藤嘉明' '可児吉長' '栗山利安' '真田信繁' '島津豊久' '島津義弘' '十河一存'
 '立花道雪' '立花宗茂' '中馬重方' '豊臣秀長' '長野業正' '二宮就辰' '延沢満延' '堀秀政' '益子勝宗' '村上義清' '森長可'
 '森成利' '山中勝重' '山中幸盛']
 ...
 ```

### word2vecとT-SNEを用いたライブドアのニュース記事の可視化

### 概要
ライブドアのニュース記事ごとに、ドキュメント特徴量を抽出します。
ドキュメント特徴量の抽出方法：
1. 記事に出現する単語のword2vec特徴量の平均


### 要件
* Ubuntu 16.04
* python 3.6

### インストール方法

#### Mecab
以下を参照して、インストールします。
http://hirotaka-hachiya.hatenablog.com/entry/2017/10/05/130026

#### word2vec
1. pip install gensim

#### livedoor-news-data
ライブドアのニュース記事データのtgzファイルをダウンロードし、livedoor-news-dataに置き、解凍します。
ライブドアのニュース記事は、カテゴリごとにxmlで記載されています。
1. cd livedoor-news-data
2. wget https://www.rondhuit.com/download/livedoor-news-data.tar.gz
3. tar -xvzf livedoor-news-data.tar.gz
4. cd ..

### 使い方
上記のインストールが完了した状態で、以下のようにword2vec_livedoor.pyを実行します。 

python word2vec_livedoor.py tfidf T F T

word2vec_livedoor.pyの引数は、
* 抽出方法(方式1:'w2v',方式2:'tfidf')
* 記事データへの処理を行うフラグ
* 辞書データの作成・更新を行うフラグ
* word2vecモデルの学習を行うフラグ
となっています。

### 各ニュースカテゴリに対する処理（方式１の場合）の説明
1. livedoor-news-dataからxmlの記事データを読み込む。
2. titleとbodyアイテムの値を抽出したテキストデータを、記事ごとに１行ずつlivedoor-news-data-txtに書き出す。
3. テキストデータにMecabで形態素解析し、形態素ごとに半角スペースで区切った形態素データをlivedoor-news-wakatiに書き出す。
4. 形態素データに対し、word2vecをかけて、記事ごとに平均を取ったベクトル（100次元）をlivedoor-news-pklに書き出す。つまり、pklには、記事の数 X 100次元の行列が保存される。

### 各ニュースカテゴリに対する処理（方式２の場合）の説明
1. livedoor-news-dataからxmlの記事データを読み込む。
2. titleとbodyアイテムの値を抽出したテキストデータを、記事ごとに１行ずつlivedoor-news-data-txtに書き出す。
3. テキストデータにMecabで形態素解析し、形態素ごとに半角スペースで区切った形態素データをlivedoor-news-wakatiに書き出す。
4. 形態素ごとに'形態素','全記事での出現回数','出現した文章の数','idf値'のデータフレームを作成、dataにcsv形式で書き出す。
5. 形態素データに対し、tf値を求める。同時にword2vecをかけて、形態素ごとのベクトル（100次元）にTF-IDF値をかけ合わせたものを記事ごとに平均したものをlivedoor-news-pklに書き出す。つまり、pklには、記事の数 X 100次元の行列が保存される。

